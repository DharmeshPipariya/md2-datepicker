{"version":3,"sources":["components/datepicker/datepicker.ts"],"names":[],"mappings":"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","file":"components/datepicker/datepicker.js","sourcesContent":["import {Component, ViewContainerRef, Input, Output, EventEmitter, AfterViewInit} from '@angular/core';\r\nimport {FORM_DIRECTIVES, NgModel, ControlValueAccessor} from '@angular/common';\r\nimport * as moment_ from 'moment';\r\n\r\nconst moment: any = (<any>moment_)['default'] || moment_;\r\n\r\nexport interface CalendarDate {\r\n  day: number;\r\n  month: number;\r\n  year: number;\r\n  enabled: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'md2-datepicker[ngModel]',\r\n  template: `\r\n  <input type=\"text\"\r\n         class=\"md2-datepicker-input\"\r\n         (focus)=\"openDatepicker()\"\r\n         [value]=\"viewValue\"\r\n         [hidden]=\"isStatic\"\r\n         readonly>\r\n\r\n  <div class=\"md2-datepicker\" *ngIf=\"isStatic || isOpened\" [ngClass]=\"{ static: isStatic }\">\r\n    <div class=\"controls\">\r\n      <div class=\"left\">\r\n        <i class=\"fa fa-backward prev-year-btn\" (click)=\"prevYear()\"></i>\r\n        <i class=\"fa fa-angle-left prev-month-btn\" (click)=\"prevMonth()\"></i>\r\n      </div>\r\n      <span class=\"date\">\r\n        {{ dateValue }}\r\n      </span>\r\n      <div class=\"right\">\r\n        <i class=\"fa fa-angle-right next-month-btn\" (click)=\"nextMonth()\"></i>\r\n        <i class=\"fa fa-forward next-year-btn\" (click)=\"nextYear()\"></i>\r\n      </div>\r\n    </div>\r\n    <div class=\"day-names\">\r\n      <span *ngFor=\"#dn of dayNames\">\r\n        <span>{{ dn }}</span>\r\n      </span>\r\n    </div>\r\n    <div class=\"calendar\">\r\n      <span *ngFor=\"let d of days; let i = index;\">\r\n        <span class=\"day\" [ngClass]=\"{'disabled': !d.enabled, 'selected': isSelected(d)}\" (click)=\"selectDate($event, d)\">\r\n          {{ d.day }}\r\n        </span>\r\n      </span>\r\n    </div>\r\n  </div>\r\n  `,\r\n  styles: [`\r\n  .md2-datepicker-input {\r\n    position: relative;\r\n    width: 100%;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .md2-datepicker {\r\n    position: absolute;\r\n    z-index: 99;\r\n    width: 250px;\r\n    background: #fff;\r\n    font-size: 12px;\r\n    color: #565a5c;\r\n    display: inline-block;\r\n    border: 1px solid #c4c4c4;\r\n    border-radius: 2px;\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n\r\n  .md2-datepicker > .controls {\r\n    width: 250px;\r\n    display: inline-block;\r\n    padding: 5px 0 0 0;\r\n  }\r\n\r\n  .md2-datepicker > .controls i {\r\n    font-size: 25px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .md2-datepicker > .controls > .left {\r\n    width: 35px;\r\n    display: inline-block;\r\n    float: left;\r\n    margin: 5px 0 0 3px;\r\n  }\r\n\r\n  .md2-datepicker > .controls > .left > i.prev-year-btn {\r\n    float: left;\r\n    display: block;\r\n    font-size: 14px;\r\n    opacity: 0.4;\r\n  }\r\n\r\n  .md2-datepicker > .controls > .left > i.prev-month-btn {\r\n    float: left;\r\n    margin: -5px 0 0 9px;\r\n    display: block;\r\n  }\r\n\r\n  .md2-datepicker > .controls > span.date {\r\n    width: 170px;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: #565a5c;\r\n    font-weight: bold;\r\n    float: left;\r\n    padding: 3px 0 0 0;\r\n  }\r\n\r\n  .md2-datepicker > .controls > .right {\r\n    width: 35px;\r\n    display: inline-block;\r\n    float: right;\r\n    margin: 5px 0 0 0;\r\n  }\r\n\r\n  .md2-datepicker > .controls > .right > i.next-year-btn {\r\n    float: left;\r\n    display: block;\r\n    font-size: 14px;\r\n    opacity: 0.4;\r\n  }\r\n\r\n  .md2-datepicker > .controls > .right > i.next-month-btn {\r\n    float: left;\r\n    margin: -6px 9px 0 0;\r\n  }\r\n\r\n  .md2-datepicker > .day-names {\r\n    width: 250px;\r\n    border-bottom: 1px solid #c4c4c4;\r\n    display: inline-block;\r\n  }\r\n\r\n  .md2-datepicker > .day-names > span {\r\n    width: 35.7px;\r\n    text-align: center;\r\n    color: #82888a;\r\n    float: left;\r\n    display: block;\r\n  }\r\n\r\n  .md2-datepicker > .calendar {\r\n    width: 255px;\r\n    display: inline-block;\r\n    margin: -3px 0 -3.5px -1px;\r\n    padding: 0;\r\n  }\r\n\r\n  .md2-datepicker > .calendar > span > span.day {\r\n    width: 35px;\r\n    height: 35px;\r\n    border-left: 1px solid #c4c4c4;\r\n    border-bottom: 1px solid #c4c4c4;\r\n    float: left;\r\n    display: block;\r\n    color: #565a5c;\r\n    text-align: center;\r\n    font-weight: bold;\r\n    line-height: 35px;\r\n    margin: 0;\r\n    padding: 0;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .md2-datepicker > .calendar > span:last-child > span.day {\r\n    border-right: 1px solid #c4c4c4;\r\n  }\r\n\r\n  .md2-datepicker > .calendar > span:nth-child(7n) > span.day {\r\n    border-right: none;\r\n  }\r\n\r\n  .md2-datepicker > .calendar > span > span.day.disabled {\r\n    border-left: 1px solid transparent;\r\n    cursor: default;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .md2-datepicker > .calendar > span > span.day:hover {\r\n    background: #2193b0;\r\n    color: #fff;\r\n  }\r\n\r\n  .md2-datepicker > .calendar > span > span.day.selected {\r\n    background: #186c81;\r\n    cursor: default;\r\n    pointer-events: none;\r\n    color: #fff;\r\n  }\r\n\r\n  .md2-datepicker.static {\r\n    position: relative;\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .md2-datepicker.static > .controls {\r\n    width: 100%;\r\n    text-align: center;\r\n    background-color: #eee;\r\n    padding: 5px 0;\r\n  }\r\n\r\n  .md2-datepicker.static > .controls > .left > i.prev-month-btn {\r\n    margin-top: -6px;\r\n  }\r\n\r\n  .md2-datepicker.static > .controls > span.date {\r\n    width: auto;\r\n    float: none;\r\n    display: inline-block;\r\n    padding-top: 4px;\r\n  }\r\n\r\n  .md2-datepicker.static > .day-names {\r\n    width: 100%;\r\n    background-color: #f9f9f9;\r\n  }\r\n\r\n  .md2-datepicker.static > .day-names > span {\r\n    width: calc(100%/7);\r\n  }\r\n\r\n  .md2-datepicker.static > .calendar {\r\n    width: 100%;\r\n  }\r\n\r\n  .md2-datepicker.static > .calendar > span > span.day {\r\n    width: calc(100%/7 - 1px);\r\n    height: 50px;\r\n    line-height: 50px;\r\n  }\r\n  `],\r\n  providers: [],\r\n  directives: [FORM_DIRECTIVES],\r\n  pipes: []\r\n})\r\nexport class Md2Datepicker implements ControlValueAccessor, AfterViewInit {\r\n  public isOpened: boolean;\r\n  public dateValue: string;\r\n  public viewValue: string;\r\n  public days: Array<CalendarDate>;\r\n  public dayNames: Array<string>;\r\n  private el: any;\r\n  private date: any;\r\n  private viewContainer: ViewContainerRef;\r\n  private onChange: Function;\r\n  private onTouched: Function;\r\n  private cd: any;\r\n  private cannonical: number;\r\n\r\n  @Input('model-format') modelFormat: string;\r\n  @Input('view-format') viewFormat: string;\r\n  @Input('init-date') initDate: string;\r\n  @Input('first-week-day-sunday') firstWeekDaySunday: boolean;\r\n  @Input('static') isStatic: boolean;\r\n\r\n  @Output() changed: EventEmitter<Date> = new EventEmitter<Date>();\r\n\r\n  constructor(cd: NgModel, viewContainer: ViewContainerRef) {\r\n    cd.valueAccessor = this;\r\n    this.cd = cd;\r\n    this.viewContainer = viewContainer;\r\n    this.el = viewContainer.element.nativeElement;\r\n    this.init();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.initValue();\r\n  }\r\n\r\n  public openDatepicker(): void {\r\n    this.isOpened = true;\r\n  }\r\n\r\n  public closeDatepicker(): void {\r\n    this.isOpened = false;\r\n  }\r\n\r\n  public prevYear(): void {\r\n    this.date.subtract(1, 'Y');\r\n    this.generateCalendar(this.date);\r\n  }\r\n\r\n  public prevMonth(): void {\r\n    this.date.subtract(1, 'M');\r\n    this.generateCalendar(this.date);\r\n  }\r\n\r\n  public nextYear(): void {\r\n    this.date.add(1, 'Y');\r\n    this.generateCalendar(this.date);\r\n  }\r\n\r\n  public nextMonth(): void {\r\n    this.date.add(1, 'M');\r\n    this.generateCalendar(this.date);\r\n  }\r\n\r\n  public selectDate(e: MouseEvent, date: CalendarDate): void {\r\n    e.preventDefault();\r\n    if (this.isSelected(date)) return;\r\n\r\n    let selectedDate = moment(date.day + '.' + date.month + '.' + date.year, 'DD.MM.YYYY');\r\n    this.setValue(selectedDate);\r\n    this.closeDatepicker();\r\n    this.changed.emit(selectedDate.toDate());\r\n  }\r\n\r\n  private generateCalendar(date: any): void {\r\n    let lastDayOfMonth = date.endOf('month').date();\r\n    let month = date.month();\r\n    let year = date.year();\r\n    let n = 1;\r\n    let firstWeekDay: number = null;\r\n\r\n    this.dateValue = date.format('MMMM YYYY');\r\n    this.days = [];\r\n\r\n    if (this.firstWeekDaySunday === true) {\r\n      firstWeekDay = date.set('date', 2).day();\r\n    } else {\r\n      firstWeekDay = date.set('date', 1).day();\r\n    }\r\n\r\n    if (firstWeekDay !== 1) {\r\n      n -= (firstWeekDay + 6) % 7;\r\n    }\r\n\r\n    for (let i = n; i <= lastDayOfMonth; i += 1) {\r\n      if (i > 0) {\r\n        this.days.push({ day: i, month: month + 1, year: year, enabled: true });\r\n      } else {\r\n        this.days.push({ day: null, month: null, year: null, enabled: false });\r\n      }\r\n    }\r\n  }\r\n\r\n  isSelected(date: CalendarDate) {\r\n    let selectedDate = moment(date.day + '.' + date.month + '.' + date.year, 'DD.MM.YYYY');\r\n    return selectedDate.toDate().getTime() === this.cannonical;\r\n  }\r\n\r\n  private generateDayNames(): void {\r\n    this.dayNames = [];\r\n    let date = this.firstWeekDaySunday === true ? moment('2015-06-07') : moment('2015-06-01');\r\n    for (let i = 0; i < 7; i += 1) {\r\n      this.dayNames.push(date.format('ddd'));\r\n      date.add('1', 'd');\r\n    }\r\n  }\r\n\r\n  private initMouseEvents(): void {\r\n    let body = document.getElementsByTagName('body')[0];\r\n\r\n    body.addEventListener('click', (e) => {\r\n      if (!this.isOpened || !e.target) return;\r\n      if (this.el !== e.target && !this.el.contains(e.target)) {\r\n        this.closeDatepicker();\r\n      }\r\n    }, false);\r\n  }\r\n\r\n  private setValue(value: any): void {\r\n    let val = moment(value, this.modelFormat || 'YYYY-MM-DD');\r\n    this.viewValue = val.format(this.viewFormat || 'Do MMMM YYYY');\r\n    this.cd.viewToModelUpdate(val.format(this.modelFormat || 'YYYY-MM-DD'));\r\n    this.cannonical = val.toDate().getTime();\r\n  }\r\n\r\n  private initValue(): void {\r\n    setTimeout(() => {\r\n      if (!this.initDate) {\r\n        this.setValue(moment().format(this.modelFormat || 'YYYY-MM-DD'));\r\n      } else {\r\n        this.setValue(moment(this.initDate, this.modelFormat || 'YYYY-MM-DD'));\r\n      }\r\n    });\r\n  }\r\n\r\n  writeValue(value: string): void {\r\n    if (!value) return;\r\n    this.setValue(value);\r\n  }\r\n\r\n  registerOnChange(fn: (_: any) => {}): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: (_: any) => {}): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  private init(): void {\r\n    this.isOpened = false;\r\n    this.date = moment();\r\n    this.firstWeekDaySunday = false;\r\n    this.generateDayNames();\r\n    this.generateCalendar(this.date);\r\n    this.initMouseEvents();\r\n  }\r\n}"],"sourceRoot":"/source/"}